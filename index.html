<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unlock Download Link</title>
    <style>
        body {
            background-color: #1e1e1e;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: Arial, sans-serif;
        }
        .modal {
            background-color: #2a2a2a;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            width: 300px;
        }
        button, input {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            border: none;
        }
        button {
            background-color: #007bff;
            color: white;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        #download-link {
            display: none;
            margin-top: 20px;
        }
        .admin-section {
            display: none;
        }
        .link-list {
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <!-- Halaman Admin Login -->
    <div class="modal" id="admin-login">
        <h2>Admin Login</h2>
        <p>Masukkan password admin:</p>
        <input type="password" id="passwordInput" placeholder="Enter password">
        <button onclick="checkPassword()">Submit</button>
        <p id="message" style="color: red;"></p>
    </div>

    <!-- Halaman Admin Panel -->
    <div class="modal admin-section" id="admin-panel">
        <h2>Admin Panel</h2>
        <p>Masukkan link Telegram dan link download:</p>
        <input type="text" id="telegramLink" placeholder="Masukkan link Telegram">
        <input type="text" id="downloadLink" placeholder="Masukkan link Download">
        <button onclick="saveLinks()">Simpan</button>
        <button onclick="logoutAdmin()">Logout</button>
    </div>

    <!-- Halaman Pengguna -->
    <div class="modal" id="user-page" style="display: none;">
        <h2>Unlock Download Link</h2>
        <p>Join Telegram untuk mengakses link download.</p>
        <button id="joinTelegram">Join Telegram</button>
        <div id="download-link">
            <p>Setelah join, download di sini:</p>
            <a href="#" id="downloadHref" target="_blank">Download Link</a>
        </div>

        <!-- Menampilkan link lama jika ada -->
        <div id="link-history" class="link-list"></div>
    </div>

    <script>
        // Password untuk admin
        const correctPassword = 'admin123'; // Ganti password di sini

        // Mengecek password admin
        function checkPassword() {
            const password = document.getElementById('passwordInput').value;
            if (password === correctPassword) {
                document.getElementById('admin-login').style.display = 'none';
                document.getElementById('admin-panel').style.display = 'block';
                loadLinks(); // Load link dari localStorage
            } else {
                document.getElementById('message').textContent = 'Password salah. Coba lagi!';
            }
        }

        // Simpan link Telegram dan Download (dengan riwayat link lama)
        function saveLinks() {
            const telegramLink = document.getElementById('telegramLink').value;
            const downloadLink = document.getElementById('downloadLink').value;

            if (telegramLink && downloadLink) {
                let telegramHistory = JSON.parse(localStorage.getItem('telegramHistory')) || [];
                let downloadHistory = JSON.parse(localStorage.getItem('downloadHistory')) || [];

                // Tambahkan link baru ke riwayat
                telegramHistory.push(telegramLink);
                downloadHistory.push(downloadLink);

                // Simpan link dan riwayat ke localStorage
                localStorage.setItem('telegramLink', telegramLink);
                localStorage.setItem('downloadLink', downloadLink);
                localStorage.setItem('telegramHistory', JSON.stringify(telegramHistory));
                localStorage.setItem('downloadHistory', JSON.stringify(downloadHistory));

                alert('Link berhasil disimpan!');
            } else {
                alert('Masukkan kedua link!');
            }
        }

        // Load link dari localStorage ke form admin
        function loadLinks() {
            const telegramLink = localStorage.getItem('telegramLink');
            const downloadLink = localStorage.getItem('downloadLink');
            if (telegramLink) document.getElementById('telegramLink').value = telegramLink;
            if (downloadLink) document.getElementById('downloadLink').value = downloadLink;
        }

        // Logout admin
        function logoutAdmin() {
            document.getElementById('admin-panel').style.display = 'none';
            document.getElementById('admin-login').style.display = 'block';
        }

        // Mode Pengguna: Tampilkan link download setelah klik Join Telegram
        document.getElementById('joinTelegram').addEventListener('click', function() {
            const telegramLink = localStorage.getItem('telegramLink');
            const downloadLink = localStorage.getItem('downloadLink');

            if (!telegramLink || !downloadLink) {
                alert('Link belum diset oleh admin.');
                return;
            }

            // Arahkan ke link Telegram terbaru
            window.open(telegramLink, '_blank');

            // Tampilkan link download terbaru
            const downloadHref = document.getElementById('downloadHref');
            downloadHref.href = downloadLink;
            document.getElementById('download-link').style.display = 'block';
        });

        // Tampilkan riwayat link Telegram dan download yang lama
        function showLinkHistory() {
            const telegramHistory = JSON.parse(localStorage.getItem('telegramHistory')) || [];
            const downloadHistory = JSON.parse(localStorage.getItem('downloadHistory')) || [];
            const historyContainer = document.getElementById('link-history');

            if (telegramHistory.length > 1) {
                const historyTitle = document.createElement('p');
                historyTitle.textContent = 'Riwayat Link Sebelumnya:';
                historyContainer.appendChild(historyTitle);

                telegramHistory.forEach((link, index) => {
                    if (index < telegramHistory.length - 1) { // Jangan tampilkan link terbaru
                        const historyItem = document.createElement('div');
                        historyItem.innerHTML = `<a href="${link}" target="_blank">Telegram Lama ${index + 1}</a> | 
                                                 <a href="${downloadHistory[index]}" target="_blank">Download Lama ${index + 1}</a>`;
                        historyContainer.appendChild(historyItem);
                    }
                });
            }
        }

        // Menampilkan halaman pengguna jika admin tidak login
        window.onload = function() {
            if (!localStorage.getItem('telegramLink') || !localStorage.getItem('downloadLink')) {
                document.getElementById('admin-login').style.display = 'block';
            } else {
                document.getElementById('user-page').style.display = 'block';
                showLinkHistory(); // Menampilkan link lama di halaman pengguna
            }
        };
    </script>

</body>
</html>
